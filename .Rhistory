filter(between(tiercode, 120201, 120299 | 129999))
n <- left_join(m, attending_socialevents, by = c("tucaseid"))
relaxing <- time %>%
ungroup() %>%
filter(tiercode == 120301 | 120399)
o <- left_join(n, relaxing, by = c("tucaseid"))
data <- o
#drop tiercodes in final, rename columns
#data = subset(data, select = -c(tiercode, dur, tiercode.x, tiercode.y, tiercode.x.x, tiercode.y.y, tiercode.x.x.x, tiercode.y.y.y, tiercode.x.x.x.x, tiercode.y.y.y.y, tiercode.x.x.x.x.x, tiercode.y.y.y.y.y, tiercode.x.x.x.x.x.x, tiercode.y.y.y.y.y.y, tiercode.x.x.x.x.x.x.x, tiercode.y.y.y.y.y.y.y, partner_works, partner_ptft, wt)) %>%
#rename(sleeping = dur.x, housework = dur.y, telephone = dur.x.x, volunteer = dur.y.y, playing_sports = dur.x.x.x, religious_activities = dur.y.y.y, eating = dur.x.x.x.x, shopping = dur.y.y.y.y, research_homework = dur.x.x.x.x.x, class = dur.y.y.y.y.y, working = dur.x.x.x.x.x.x, HHchildcare = dur.y.y.y.y.y.y, HHadultcare = dur.x.x.x.x.x.x.x, attending_socials = dur.y.y.y.y.y.y.y) %>%
#filter(tuyear == 2016) %>%
#distinct()
#write.csv(o, "50proj/2016.csv")
#HI <- o %>%
#filter(state == "HI", tuyear == 2016)
#how to change minutes (dur) into hours
cps <- atuscps
time <- atusact
resp <- atusresp
#join cpc and resp files together by respondent's ID number
table <- left_join(cps, resp, by = c("tucaseid"))
sleeping <- time %>%
ungroup() %>% #why do i need ungroup since i don't group time
filter(tiercode == 10101)
a <- left_join(table, sleeping, by = c("tucaseid"))
housework <- time %>%
ungroup() %>%
filter(between(tiercode, 20101, 20199))
b <- left_join(a, housework, by = c("tucaseid"))
telephone <- time %>%
ungroup() %>%
filter(between(tiercode, 160101, 169989))
c <- left_join(b, telephone, by = c("tucaseid"))
volunteer <- time %>%
ungroup() %>%
filter(between(tiercode, 150101, 159989))
d <- left_join(c, volunteer, by = c("tucaseid"))
playingsports <- time %>%
ungroup() %>%
filter(between(tiercode, 130101, 130199))
e <- left_join(d, playingsports, by = c("tucaseid"))
religious_activities <- time %>%
ungroup() %>%
filter(between(tiercode, 140101, 149999))
f <- left_join(e, religious_activities, by = c("tucaseid"))
eating <- time %>%
ungroup() %>%
filter(between(tiercode, 110101, 119999))
g <- left_join(f, eating, by = c("tucaseid"))
shopping <- time %>%
ungroup() %>%
filter(between(tiercode, 70101, 70199))
h <- left_join(g, shopping, by = c("tucaseid"))
research_homework <- time %>%
ungroup() %>%
filter(between(tiercode, 60301, 60399))
i <- left_join(h, research_homework, by = c("tucaseid"))
class <- time %>%
ungroup() %>%
filter(between(tiercode, 60101, 60199))
j <- left_join(i, class, by = c("tucaseid"))
working <- time %>%
ungroup() %>%
filter(between(tiercode, 50101, 59999))
k <- left_join(j, working, by = c("tucaseid"))
HHchildcare <- time %>%
ungroup() %>%
filter(between(tiercode, 30101, 30399))
l <- left_join(k, HHchildcare, by = c("tucaseid"))
HHadultcare <- time %>%
ungroup() %>%
filter(between(tiercode, 30401, 30599))
m <- left_join(l, HHadultcare, by = c("tucaseid"))
attending_socialevents <- time %>%
ungroup() %>%
filter(between(tiercode, 120201, 120299 | 129999))
n <- left_join(m, attending_socialevents, by = c("tucaseid"))
relaxing <- time %>%
ungroup() %>%
filter(tiercode == 120301 | 120399)
o <- left_join(n, relaxing, by = c("tucaseid"))
data <- o
#drop tiercodes in final, rename columns
data = subset(data, select = -c(tiercode, dur, tiercode.x, tiercode.y, tiercode.x.x, tiercode.y.y, tiercode.x.x.x, tiercode.y.y.y, tiercode.x.x.x.x, tiercode.y.y.y.y, tiercode.x.x.x.x.x, tiercode.y.y.y.y.y, tiercode.x.x.x.x.x.x, tiercode.y.y.y.y.y.y, tiercode.x.x.x.x.x.x.x, tiercode.y.y.y.y.y.y.y, partner_works, partner_ptft, wt)) %>%
rename(sleeping = dur.x, housework = dur.y, telephone = dur.x.x, volunteer = dur.y.y, playing_sports = dur.x.x.x, religious_activities = dur.y.y.y, eating = dur.x.x.x.x, shopping = dur.y.y.y.y, research_homework = dur.x.x.x.x.x, class = dur.y.y.y.y.y, working = dur.x.x.x.x.x.x, HHchildcare = dur.y.y.y.y.y.y, HHadultcare = dur.x.x.x.x.x.x.x, attending_socials = dur.y.y.y.y.y.y.y) %>%
filter(tuyear == 2016) %>%
distinct()
#write.csv(o, "50proj/2016.csv")
#HI <- o %>%
#filter(state == "HI", tuyear == 2016)
#how to change minutes (dur) into hours
df <- data %>%
select(state, sleeping) %>%
group_by(state)
#mutate(mean_sleeping = mean(sleeping)) %>%
#distinct()
View(df)
df <- data %>%
select(state, sleeping) %>%
group_by(sum(state))
df <- data %>%
select(state, sleeping) %>%
aggregate(sleeping ~ state, data, mean)
df <- data %>%
select(state, sleeping) %>%
aggregate(by sleeping ~ state, data, mean)
?aggregate
df <- data %>%
select(state, sleeping) %>%
aggregate(data, list(State = state), mean)
df <- data %>%
select(state, sleeping) %>%
aggregate(data, list(State = data$state), mean)
View(data)
df <- data %>%
select(state, sleeping) %>%
aggregate(df, list(State = state), mean)
df <- data %>%
select(state, sleeping) %>%
aggregate(df, list(State = df$state), mean)
df <- data %>%
select(state, sleeping) %>%
aggregate(x = df, by = list(state, sleeping), FUN = "mean")
df <- data %>%
select(state, sleeping) %>%
aggregate(x = df, by = list(sleeping), FUN = "mean")
df <- data %>%
select(state, sleeping) %>%
mutate(mean_sleeping = mean(sleeping))
#distinct()
View(df)
df <- data %>%
select(state, sleeping) %>%
mutate(mean_sleeping = mean(sleeping)) %>%
distinct()
View(df)
df <- data %>%
select(state, sleeping) %>%
group_by(state) %>%
mutate(mean_sleeping = mean(sleeping)) %>%
group_by(state) %>%
distinct()
View(df)
df <- data %>%
select(state, sleeping) %>%
group_by(state) %>%
mutate(mean_sleeping = mean(sleeping)) %>%
drop(sleeping)
df <- data %>%
select(state, sleeping) %>%
group_by(state) %>%
mutate(mean_sleeping = mean(sleeping))
df1 <- df %>%
select(state, mean_sleeping)
View(df1)
df <- data %>%
select(state, sleeping) %>%
group_by(state) %>%
mutate(mean_sleeping = mean(sleeping))
df1 <- df %>%
select(state, mean_sleeping) %>%
distinct()
View(df1)
View(data)
df1 <- data %>%
select(state, sleeping) %>%
group_by(state) %>%
mutate(mean_sleeping = mean(sleeping))
dfsleeping <- df1 %>%
select(state, mean_sleeping) %>%
distinct()
df2 <- data %>%
select(state, housework) %>%
group_by(state) %>%
mutate(mean_housework = mean(housework))
dfhousework <- df2 %>%
select(housework) %>%
distinct()
idk <- left_join(dfhousework, dfsleeping, by = c("state"))
df1 <- data %>%
select(state, sleeping) %>%
group_by(state) %>%
mutate(mean_sleeping = mean(sleeping))
dfsleeping <- df1 %>%
select(state, mean_sleeping) %>%
distinct()
df2 <- data %>%
select(state, housework) %>%
group_by(state) %>%
mutate(mean_housework = mean(housework))
dfhousework <- df2 %>%
select(state, housework) %>%
distinct()
idk <- left_join(dfhousework, dfsleeping, by = c("state"))
View(idk)
df1 <- data %>%
select(state, sleeping) %>%
group_by(state) %>%
mutate(mean_sleeping = mean(sleeping))
dfsleeping <- df1 %>%
select(state, mean_sleeping) %>%
distinct()
df2 <- data %>%
select(state, housework) %>%
group_by(state) %>%
mutate(mean_housework = mean(housework))
dfhousework <- df2 %>%
select(state, mean_housework) %>%
distinct()
idk <- left_join(dfhousework, dfsleeping, by = c("state"))
View(idk)
mutate(mean_housework = avg(housework))
runApp('50proj')
runApp('50proj')
runApp('50proj')
runApp('50proj')
runApp('50proj')
runApp('50proj')
runApp('50proj')
runApp('50proj')
runApp('50proj')
runApp('50proj')
runApp('50proj')
runApp('50proj')
knitr::opts_chunk$set(echo = TRUE)
library(shiny)
library(tidyverse)
library(ggplot2)
library(atus)
library(shinythemes)
library(skimr)
library(readxl)
library(janitor)
library(dplyr)
cps <- atuscps
time <- atusact
resp <- atusresp
#join cpc and resp files together by respondent's ID number
table <- left_join(cps, resp, by = c("tucaseid"))
sleeping <- time %>%
ungroup() %>% #why do i need ungroup since i don't group time
filter(tiercode == 10101)
a <- left_join(table, sleeping, by = c("tucaseid"))
housework <- time %>%
ungroup() %>%
filter(between(tiercode, 20101, 20199))
b <- left_join(a, housework, by = c("tucaseid"))
telephone <- time %>%
ungroup() %>%
filter(between(tiercode, 160101, 169989))
c <- left_join(b, telephone, by = c("tucaseid"))
volunteer <- time %>%
ungroup() %>%
filter(between(tiercode, 150101, 159989))
d <- left_join(c, volunteer, by = c("tucaseid"))
playingsports <- time %>%
ungroup() %>%
filter(between(tiercode, 130101, 130199))
e <- left_join(d, playingsports, by = c("tucaseid"))
religious_activities <- time %>%
ungroup() %>%
filter(between(tiercode, 140101, 149999))
f <- left_join(e, religious_activities, by = c("tucaseid"))
eating <- time %>%
ungroup() %>%
filter(between(tiercode, 110101, 119999))
g <- left_join(f, eating, by = c("tucaseid"))
shopping <- time %>%
ungroup() %>%
filter(between(tiercode, 70101, 70199))
h <- left_join(g, shopping, by = c("tucaseid"))
research_homework <- time %>%
ungroup() %>%
filter(between(tiercode, 60301, 60399))
i <- left_join(h, research_homework, by = c("tucaseid"))
class <- time %>%
ungroup() %>%
filter(between(tiercode, 60101, 60199))
j <- left_join(i, class, by = c("tucaseid"))
working <- time %>%
ungroup() %>%
filter(between(tiercode, 50101, 59999))
k <- left_join(j, working, by = c("tucaseid"))
HHchildcare <- time %>%
ungroup() %>%
filter(between(tiercode, 30101, 30399))
l <- left_join(k, HHchildcare, by = c("tucaseid"))
HHadultcare <- time %>%
ungroup() %>%
filter(between(tiercode, 30401, 30599))
m <- left_join(l, HHadultcare, by = c("tucaseid"))
attending_socialevents <- time %>%
ungroup() %>%
filter(between(tiercode, 120201, 120299 | 129999))
n <- left_join(m, attending_socialevents, by = c("tucaseid"))
relaxing <- time %>%
ungroup() %>%
filter(tiercode == 120301 | 120399)
o <- left_join(n, relaxing, by = c("tucaseid"))
data <- o
#drop tiercodes in final, rename columns
data = subset(data, select = -c(tiercode, dur, tiercode.x, tiercode.y, tiercode.x.x, tiercode.y.y, tiercode.x.x.x, tiercode.y.y.y, tiercode.x.x.x.x, tiercode.y.y.y.y, tiercode.x.x.x.x.x, tiercode.y.y.y.y.y, tiercode.x.x.x.x.x.x, tiercode.y.y.y.y.y.y, tiercode.x.x.x.x.x.x.x, tiercode.y.y.y.y.y.y.y, partner_works, partner_ptft, wt)) %>%
rename(sleeping = dur.x, housework = dur.y, telephone = dur.x.x, volunteer = dur.y.y, playing_sports = dur.x.x.x, religious_activities = dur.y.y.y, eating = dur.x.x.x.x, shopping = dur.y.y.y.y, research_homework = dur.x.x.x.x.x, class = dur.y.y.y.y.y, working = dur.x.x.x.x.x.x, HHchildcare = dur.y.y.y.y.y.y, HHadultcare = dur.x.x.x.x.x.x.x, attending_socials = dur.y.y.y.y.y.y.y) %>%
filter(tuyear == 2016) %>%
distinct()
#write.csv(o, "50proj/2016.csv")
#HI <- o %>%
#filter(state == "HI", tuyear == 2016)
#how to change minutes (dur) into hours
install.packages("PPBDS.data")
remove.packages("PPBDS.data")
library(remotes)
remotes::install_github("davidkane9/PPBDS.data")
install.pacakages("PPBDS.data")
install.packages("PPBDS.data")
shiny::runApp('50proj')
View(idk)
knitr::opts_chunk$set(echo = TRUE)
library(shiny)
library(tidyverse)
library(ggplot2)
library(atus)
library(shinythemes)
library(skimr)
library(readxl)
library(janitor)
library(dplyr)
cps <- atuscps
time <- atusact
resp <- atusresp
#join cpc and resp files together by respondent's ID number
table <- left_join(cps, resp, by = c("tucaseid"))
sleeping <- time %>%
ungroup() %>% #why do i need ungroup since i don't group time
filter(tiercode == 10101)
a <- left_join(table, sleeping, by = c("tucaseid"))
housework <- time %>%
ungroup() %>%
filter(between(tiercode, 20101, 20199))
b <- left_join(a, housework, by = c("tucaseid"))
telephone <- time %>%
ungroup() %>%
filter(between(tiercode, 160101, 169989))
c <- left_join(b, telephone, by = c("tucaseid"))
volunteer <- time %>%
ungroup() %>%
filter(between(tiercode, 150101, 159989))
d <- left_join(c, volunteer, by = c("tucaseid"))
playingsports <- time %>%
ungroup() %>%
filter(between(tiercode, 130101, 130199))
e <- left_join(d, playingsports, by = c("tucaseid"))
religious_activities <- time %>%
ungroup() %>%
filter(between(tiercode, 140101, 149999))
f <- left_join(e, religious_activities, by = c("tucaseid"))
eating <- time %>%
ungroup() %>%
filter(between(tiercode, 110101, 119999))
g <- left_join(f, eating, by = c("tucaseid"))
shopping <- time %>%
ungroup() %>%
filter(between(tiercode, 70101, 70199))
h <- left_join(g, shopping, by = c("tucaseid"))
research_homework <- time %>%
ungroup() %>%
filter(between(tiercode, 60301, 60399))
i <- left_join(h, research_homework, by = c("tucaseid"))
class <- time %>%
ungroup() %>%
filter(between(tiercode, 60101, 60199))
j <- left_join(i, class, by = c("tucaseid"))
working <- time %>%
ungroup() %>%
filter(between(tiercode, 50101, 59999))
k <- left_join(j, working, by = c("tucaseid"))
HHchildcare <- time %>%
ungroup() %>%
filter(between(tiercode, 30101, 30399))
l <- left_join(k, HHchildcare, by = c("tucaseid"))
HHadultcare <- time %>%
ungroup() %>%
filter(between(tiercode, 30401, 30599))
m <- left_join(l, HHadultcare, by = c("tucaseid"))
attending_socialevents <- time %>%
ungroup() %>%
filter(between(tiercode, 120201, 120299 | 129999))
n <- left_join(m, attending_socialevents, by = c("tucaseid"))
relaxing <- time %>%
ungroup() %>%
filter(tiercode == 120301 | 120399)
o <- left_join(n, relaxing, by = c("tucaseid"))
data <- o
#drop tiercodes in final, rename columns
data = subset(data, select = -c(tiercode, dur, tiercode.x, tiercode.y, tiercode.x.x, tiercode.y.y, tiercode.x.x.x, tiercode.y.y.y, tiercode.x.x.x.x, tiercode.y.y.y.y, tiercode.x.x.x.x.x, tiercode.y.y.y.y.y, tiercode.x.x.x.x.x.x, tiercode.y.y.y.y.y.y, tiercode.x.x.x.x.x.x.x, tiercode.y.y.y.y.y.y.y, partner_works, partner_ptft, wt)) %>%
rename(sleeping = dur.x, housework = dur.y, telephone = dur.x.x, volunteer = dur.y.y, playing_sports = dur.x.x.x, religious_activities = dur.y.y.y, eating = dur.x.x.x.x, shopping = dur.y.y.y.y, research_homework = dur.x.x.x.x.x, class = dur.y.y.y.y.y, working = dur.x.x.x.x.x.x, HHchildcare = dur.y.y.y.y.y.y, HHadultcare = dur.x.x.x.x.x.x.x, attending_socials = dur.y.y.y.y.y.y.y) %>%
filter(tuyear == 2016) %>%
distinct()
#write.csv(o, "50proj/2016.csv")
#HI <- o %>%
#filter(state == "HI", tuyear == 2016)
#how to change minutes (dur) into hours
View(idk)
df1 <- data %>%
select(state, sleeping) %>%
group_by(state) %>%
mutate(mean_sleeping = mean(sleeping))
dfsleeping <- df1 %>%
select(state, mean_sleeping) %>%
distinct()
df2 <- data %>%
select(state, housework) %>%
group_by(state) %>%
mutate(mean_housework = mean(housework))
dfhousework <- df2 %>%
select(state, mean_housework) %>%
distinct()
idk <- left_join(dfhousework, dfsleeping, by = c("state"))
View(idk)
View(dfsleeping)
cps <- atuscps
time <- atusact
resp <- atusresp
#join cpc and resp files together by respondent's ID number
table <- left_join(cps, resp, by = c("tucaseid"))
sleeping <- time %>%
ungroup() %>% #why do i need ungroup since i don't group time
filter(tiercode == 10101)
a <- left_join(table, sleeping, by = c("tucaseid"))
housework <- time %>%
ungroup() %>%
filter(between(tiercode, 20101, 20199))
b <- left_join(a, housework, by = c("tucaseid"))
telephone <- time %>%
ungroup() %>%
filter(between(tiercode, 160101, 169989))
c <- left_join(b, telephone, by = c("tucaseid"))
volunteer <- time %>%
ungroup() %>%
filter(between(tiercode, 150101, 159989))
d <- left_join(c, volunteer, by = c("tucaseid"))
playingsports <- time %>%
ungroup() %>%
filter(between(tiercode, 130101, 130199))
e <- left_join(d, playingsports, by = c("tucaseid"))
religious_activities <- time %>%
ungroup() %>%
filter(between(tiercode, 140101, 149999))
f <- left_join(e, religious_activities, by = c("tucaseid"))
eating <- time %>%
ungroup() %>%
filter(between(tiercode, 110101, 119999))
g <- left_join(f, eating, by = c("tucaseid"))
shopping <- time %>%
ungroup() %>%
filter(between(tiercode, 70101, 70199))
h <- left_join(g, shopping, by = c("tucaseid"))
research_homework <- time %>%
ungroup() %>%
filter(between(tiercode, 60301, 60399))
i <- left_join(h, research_homework, by = c("tucaseid"))
class <- time %>%
ungroup() %>%
filter(between(tiercode, 60101, 60199))
j <- left_join(i, class, by = c("tucaseid"))
working <- time %>%
ungroup() %>%
filter(between(tiercode, 50101, 59999))
k <- left_join(j, working, by = c("tucaseid"))
HHchildcare <- time %>%
ungroup() %>%
filter(between(tiercode, 30101, 30399))
l <- left_join(k, HHchildcare, by = c("tucaseid"))
HHadultcare <- time %>%
ungroup() %>%
filter(between(tiercode, 30401, 30599))
m <- left_join(l, HHadultcare, by = c("tucaseid"))
attending_socialevents <- time %>%
ungroup() %>%
filter(between(tiercode, 120201, 120299 | 129999))
n <- left_join(m, attending_socialevents, by = c("tucaseid"))
relaxing <- time %>%
ungroup() %>%
filter(tiercode == 120301 | 120399)
o <- left_join(n, relaxing, by = c("tucaseid"))
data <- o
#drop tiercodes in final, rename columns
data = subset(data, select = -c(tiercode, dur, tiercode.x, tiercode.y, tiercode.x.x, tiercode.y.y, tiercode.x.x.x, tiercode.y.y.y, tiercode.x.x.x.x, tiercode.y.y.y.y, tiercode.x.x.x.x.x, tiercode.y.y.y.y.y, tiercode.x.x.x.x.x.x, tiercode.y.y.y.y.y.y, tiercode.x.x.x.x.x.x.x, tiercode.y.y.y.y.y.y.y, partner_works, partner_ptft, wt)) %>%
rename(sleeping = dur.x, housework = dur.y, telephone = dur.x.x, volunteer = dur.y.y, playing_sports = dur.x.x.x, religious_activities = dur.y.y.y, eating = dur.x.x.x.x, shopping = dur.y.y.y.y, research_homework = dur.x.x.x.x.x, class = dur.y.y.y.y.y, working = dur.x.x.x.x.x.x, HHchildcare = dur.y.y.y.y.y.y, HHadultcare = dur.x.x.x.x.x.x.x, attending_socials = dur.y.y.y.y.y.y.y) %>%
filter(tuyear == 2015 || 2016) %>%
distinct()
#write.csv(o, "50proj/2016.csv")
#HI <- o %>%
#filter(state == "HI", tuyear == 2016)
#how to change minutes (dur) into hours
df1 <- data %>%
select(state, sleeping) %>%
group_by(state) %>%
mutate(mean_sleeping = mean(sleeping))
dfsleeping <- df1 %>%
select(state, mean_sleeping) %>%
distinct()
df2 <- data %>%
select(state, housework) %>%
group_by(state) %>%
mutate(mean_housework = mean(housework))
dfhousework <- df2 %>%
select(state, mean_housework) %>%
distinct()
idk <- left_join(dfhousework, dfsleeping, by = c("state"))
View(dfs;eeping)
View(dfsleeping)
